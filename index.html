<!DOCTYPE html>
<html lang="en" style="scroll-behavior: smooth;">

<head>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-3YMMMBS73T"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());

    gtag('config', 'G-3YMMMBS73T');
  </script>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Property Investing UK: Live 2026 Directory & High-Yield Guide</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Outfit:wght@500;600;700;800&display=swap"
    rel="stylesheet">

  <meta name="description"
    content="The ultimate real-time directory for UK property investment. Tracking 50+ channels on HMOs, BTL, and regeneration hotspots in Manchester, Birmingham, and Liverpool." />

  <!-- SEO & Social Media Metadata (OpenGraph) -->
  <meta property="og:title" content="Property Investing UK: Live 2026 Directory & High-Yield Guide" />
  <meta property="og:description"
    content="The ultimate real-time directory for UK property investment. Tracking 50+ channels on HMOs, BTL, and regeneration hotspots." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://propertyinvestorspodcast.com/" />
  <meta property="og:image"
    content="https://images.unsplash.com/photo-1582408921715-18e7806365c1?auto=format&fit=crop&w=1200&q=80" />

  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="UK Property Investors Hub 2026" />
  <meta name="twitter:description" content="Live directory and market intelligence for UK property investors." />
  <meta name="twitter:image"
    content="https://images.unsplash.com/photo-1582408921715-18e7806365c1?auto=format&fit=crop&w=1200&q=80" />

  <!-- Canonical Tag -->
  <link rel="canonical" href="https://propertyinvestorspodcast.com/" />

  <!-- Favicon -->
  <link rel="icon" type="image/svg+xml" href="favicon.svg">

  <!-- Schema Markup (JSON-LD) -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "CollectionPage",
    "name": "Property Investing UK 2026 Guide",
    "description": "A comprehensive directory and intelligence hub for UK property investors in 2026.",
    "publisher": {
      "@type": "Organization",
      "name": "UK Property Intelligence"
    },
    "mainEntity": {
      "@type": "ItemList",
      "itemListElement": [
        {
          "@type": "VideoGallery",
          "name": "UK Property YouTube Network",
          "description": "Real-time updates from 50+ top UK property investment channels."
        }
      ]
    }
  }
  </script>

  <style>
    :root {
      --bg-color: #0a0a0a;
      --card-bg: #161616;
      --card-hover: #1c1c1c;
      --text-primary: #f5f5f5;
      --text-secondary: #999999;
      --accent: hsl(85, 55%, 55%);
      --accent-hover: hsl(85, 60%, 65%);
      --border: rgba(255, 255, 255, 0.08);
      --error: #ff4444;
      --glass-bg: rgba(10, 10, 10, 0.75);
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
    }

    body {
      background-color: var(--bg-color);
      color: var(--text-primary);
      line-height: 1.6;
      padding-bottom: 40px;
    }

    header {
      position: relative;
      z-index: 100;
      background: var(--glass-bg);
      backdrop-filter: blur(16px);
      -webkit-backdrop-filter: blur(16px);
      border-bottom: 1px solid var(--border);
      padding: 1.25rem 1rem;
    }

    .header-content {
      max-width: 1200px;
      margin: 0 auto;
      display: flex;
      flex-direction: row;
      justify-content: space-between;
      align-items: center;
      gap: 1rem;
    }

    .title-area h1 {
      font-family: 'Outfit', sans-serif;
      font-size: 1.5rem;
      font-weight: 800;
      color: var(--accent);
      letter-spacing: -0.03em;
      text-transform: uppercase;
    }

    .title-area p {
      font-size: 0.8rem;
      color: var(--text-secondary);
      font-weight: 500;
    }

    @media (max-width: 600px) {
      .header-content {
        flex-direction: column;
        align-items: flex-start;
      }
    }

    .controls {
      display: flex;
      gap: 0.5rem;
      flex-wrap: wrap;
      align-items: center;
    }

    #search-bar {
      flex: 1;
      min-width: 200px;
      background: var(--card-bg);
      border: 1px solid var(--border);
      color: white;
      padding: 0.6rem 1rem;
      border-radius: 4px;
      outline: none;
    }

    #search-bar:focus {
      border-color: var(--accent);
    }

    .btn {
      background: var(--accent);
      color: #000;
      border: none;
      padding: 0.6rem 1.2rem;
      border-radius: 4px;
      font-weight: 600;
      cursor: pointer;
      transition: background 0.2s;
      white-space: nowrap;
    }

    .btn:hover {
      background: var(--accent-hover);
    }

    .counter {
      font-size: 0.85rem;
      color: var(--text-secondary);
      background: var(--border);
      padding: 0.2rem 0.6rem;
      border-radius: 100px;
    }

    main {
      max-width: 1200px;
      margin: 2rem auto;
      padding: 0 1rem;
    }

    .channel-grid {
      display: grid;
      gap: 2rem;
      grid-template-columns: 1fr;
    }

    @media (min-width:768px) {
      .channel-grid {
        grid-template-columns: repeat(2, 1fr);
      }
    }

    @media (min-width:1024px) {
      .channel-grid {
        grid-template-columns: repeat(3, 1fr);
      }
    }

    .channel-card {
      background: rgba(255, 255, 255, 0.03);
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      border-radius: 12px;
      overflow: hidden;
      border: 1px solid var(--border);
      display: flex;
      flex-direction: column;
      transition: transform 0.3s ease, border-color 0.3s ease, box-shadow 0.3s ease;
    }

    .channel-card:hover {
      transform: translateY(-4px);
      border-color: rgba(122, 201, 67, 0.3);
      box-shadow: 0 12px 30px rgba(0, 0, 0, 0.4);
      background: rgba(255, 255, 255, 0.05);
    }

    .channel-header {
      padding: 1rem;
      border-bottom: 1px solid var(--border);
    }

    .channel-name {
      font-size: 1.1rem;
      font-weight: 700;
      margin-bottom: 0.25rem;
      display: block;
      color: var(--text-primary);
      text-decoration: none;
    }

    .channel-name:hover {
      color: var(--accent);
    }

    .channel-links {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 0.8rem;
      gap: 0.75rem;
    }

    .open-link {
      color: var(--accent);
      text-decoration: none;
      flex: 0 0 auto;
    }

    .status {
      font-size: 0.75rem;
      color: var(--text-secondary);
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      flex: 1 1 auto;
      justify-content: flex-end;
      text-align: right;
    }

    .status.error {
      color: var(--error);
    }

    .status.success {
      color: var(--accent);
    }

    .retry-btn {
      background: transparent;
      border: 1px solid currentColor;
      color: inherit;
      cursor: pointer;
      font-size: 10px;
      padding: 2px 6px;
      border-radius: 3px;
    }

    .video-grid {
      display: grid;
      grid-template-columns: repeat(1, 1fr);
      gap: 1rem;
      padding: 1rem;
    }

    @media (min-width:480px) {
      .video-grid {
        grid-template-columns: repeat(2, 1fr);
      }
    }

    .video-item {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
      cursor: pointer;
      user-select: none;
    }

    .thumb-wrapper {
      aspect-ratio: 16/9;
      background: #000;
      position: relative;
      overflow: hidden;
      border-radius: 4px;
    }

    .thumb-wrapper img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform 0.3s, opacity 0.3s;
    }

    .video-item:hover .thumb-wrapper img {
      transform: scale(1.05);
      opacity: 0.85;
    }

    .video-title {
      font-size: 0.8rem;
      font-weight: 500;
      color: var(--text-primary);
      display: -webkit-box;
      -webkit-line-clamp: 2;
      line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
      line-height: 1.2;
    }

    .special-section {
      max-width: 1200px;
      margin: 2rem auto;
      padding: 0 1rem;
    }

    .section-title {
      font-family: 'Outfit', sans-serif;
      font-size: 1.75rem;
      font-weight: 700;
      color: var(--accent);
      margin-bottom: 1.25rem;
      display: flex;
      align-items: center;
      gap: 0.75rem;
      letter-spacing: -0.02em;
    }

    .featured-card {
      background: linear-gradient(145deg, #1a1a1a, #111111);
      border: 1px solid rgba(122, 201, 67, 0.2);
      border-radius: 16px;
      overflow: hidden;
      display: grid;
      grid-template-columns: 1fr;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
    }

    @media (min-width:768px) {
      .featured-card {
        grid-template-columns: 1.5fr 1fr;
      }
    }

    .featured-thumb {
      aspect-ratio: 16/9;
      background: #000;
      cursor: pointer;
      position: relative;
    }

    .featured-thumb img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .featured-thumb::after {
      content: '▶';
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 3rem;
      color: white;
      text-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
      opacity: 0.85;
      pointer-events: none;
    }

    .featured-content {
      padding: 2rem;
      display: flex;
      flex-direction: column;
      justify-content: center;
      gap: 1rem;
    }

    .latest-scroll {
      display: flex;
      gap: 1rem;
      overflow-x: auto;
      padding-bottom: 1rem;
      scrollbar-width: thin;
      scrollbar-color: var(--accent) var(--border);
    }

    .latest-item {
      flex: 0 0 280px;
      background: var(--card-bg);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 0.75rem;
      cursor: pointer;
    }

    .latest-item:hover {
      border-color: var(--accent);
    }

    /* Shorts Section Styles */
    .shorts-scroll {
      display: flex;
      gap: 1rem;
      overflow-x: auto;
      padding-bottom: 1rem;
      scrollbar-width: thin;
      scrollbar-color: var(--accent) var(--border);
    }

    .shorts-item {
      flex: 0 0 160px;
      background: var(--card-bg);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 0;
      overflow: hidden;
      cursor: pointer;
      position: relative;
      transition: border-color 0.2s;
    }

    .shorts-item:hover {
      border-color: var(--accent);
    }

    .shorts-thumb-wrapper {
      aspect-ratio: 9/16;
      background: #000;
      position: relative;
    }

    .shorts-thumb-wrapper img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .shorts-badge {
      position: absolute;
      top: 8px;
      right: 8px;
      background: rgba(255, 0, 0, 0.8);
      color: white;
      font-size: 0.6rem;
      font-weight: 800;
      padding: 2px 6px;
      border-radius: 4px;
      text-transform: uppercase;
    }

    .shorts-title {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      background: linear-gradient(transparent, rgba(0, 0, 0, 0.9));
      padding: 1rem 0.5rem 0.5rem;
      font-size: 0.75rem;
      font-weight: 500;
      color: white;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .latest-channel {
      font-size: 0.7rem;
      color: var(--accent);
      text-transform: uppercase;
      font-weight: 700;
      margin-bottom: 0.25rem;
    }

    .modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.9);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 1000;
      padding: 1rem;
    }

    .modal-content {
      width: 100%;
      max-width: 900px;
      background: #000;
      border-radius: 8px;
      overflow: hidden;
      position: relative;
    }

    .video-container {
      position: relative;
      padding-bottom: 56.25%;
      height: 0;
    }

    .video-container iframe {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border: none;
    }

    .modal-info {
      padding: 1rem;
      background: var(--card-bg);
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }

    .modal-title {
      font-size: 1.1rem;
      font-weight: 600;
    }

    .modal-actions {
      display: flex;
      gap: 1rem;
      align-items: center;
      flex-wrap: wrap;
    }

    .modal-close {
      position: absolute;
      top: 10px;
      right: 10px;
      background: rgba(0, 0, 0, 0.5);
      color: white;
      border: none;
      width: 36px;
      height: 36px;
      border-radius: 50%;
      cursor: pointer;
      font-size: 1.2rem;
      z-index: 10;
    }

    .yt-link {
      color: var(--accent);
      text-decoration: none;
      font-size: 0.9rem;
    }

    .loader {
      width: 16px;
      height: 16px;
      border: 2px solid var(--text-secondary);
      border-bottom-color: transparent;
      border-radius: 50%;
      display: inline-block;
      animation: rotation 1s linear infinite;
      vertical-align: middle;
      margin-right: 5px;
    }

    @keyframes rotation {
      0% {
        transform: rotate(0deg);
      }

      100% {
        transform: rotate(360deg);
      }
    }

    /* SEO Content Styles */
    #seo-intro {
      max-width: 1000px;
      margin: 2rem auto;
      padding: 0;
      background: var(--card-bg);
      border-radius: 12px;
      border: 1px solid var(--border);
      overflow: hidden;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    #seo-intro.collapsed {
      max-height: 80px;
    }

    .seo-header {
      padding: 1.5rem 2rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      cursor: pointer;
      background: rgba(255, 255, 255, 0.02);
      border-bottom: 1px solid var(--border);
      user-select: none;
    }

    .seo-header h2 {
      font-family: 'Outfit', sans-serif;
      font-size: 1.25rem;
      color: var(--accent);
      margin: 0 !important;
    }

    .toggle-icon {
      font-size: 1.5rem;
      transition: transform 0.3s;
      color: var(--accent);
    }

    #seo-intro:not(.collapsed) .toggle-icon {
      transform: rotate(180deg);
    }

    /* Back to Top Button */
    .back-to-top {
      position: fixed;
      bottom: 2rem;
      right: 2rem;
      width: 50px;
      height: 50px;
      background: rgba(255, 255, 255, 0.05);
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      border: 1px solid var(--border);
      border-radius: 50%;
      color: var(--accent);
      display: flex;
      justify-content: center;
      align-items: center;
      cursor: pointer;
      z-index: 1000;
      transition: all 0.3s ease;
      opacity: 0;
      visibility: hidden;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
    }

    .back-to-top.visible {
      opacity: 1;
      visibility: visible;
    }

    .back-to-top:hover {
      background: rgba(255, 255, 255, 0.1);
      transform: translateY(-5px);
      border-color: var(--accent);
    }

    .back-to-top svg {
      width: 24px;
      height: 24px;
      fill: currentColor;
    }

    .seo-body {
      padding: 2rem;
      line-height: 1.8;
      color: var(--text-secondary);
    }

    #seo-intro p {
      margin-bottom: 1.2rem;
    }

    .insight-grid {
      display: grid;
      grid-template-columns: repeat(1, 1fr);
      gap: 1.5rem;
      margin: 2rem 0;
    }

    @media (min-width: 768px) {
      .insight-grid {
        grid-template-columns: repeat(3, 1fr);
      }
    }

    .insight-card {
      background: #161616;
      border-left: 4px solid var(--accent);
      padding: 1.5rem;
      border-radius: 4px;
      transition: transform 0.2s;
    }

    .insight-card:hover {
      transform: translateY(-5px);
    }

    .insight-card h3 {
      font-size: 1rem;
      margin-bottom: 0.75rem;
      color: var(--accent);
    }

    .insight-card p {
      font-size: 0.85rem;
      color: var(--text-secondary);
    }

    footer {
      max-width: 1200px;
      margin: 4rem auto 2rem;
      padding: 2rem 1rem;
      border-top: 1px solid var(--border);
      text-align: center;
      color: var(--text-secondary);
      font-size: 0.85rem;
    }

    .disclaimer {
      font-style: italic;
      margin-bottom: 1rem;
      max-width: 800px;
      margin-left: auto;
      margin-right: auto;
    }
  </style>
</head>

<body>
  <header>
    <div class="header-content">
      <div class="title-area">
        <div style="display: flex; align-items: center; gap: 1rem;">
          <div class="logo-wrapper" style="width: 48px; height: 48px; flex-shrink: 0;">
            <svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" style="width: 100%; height: 100%;">
              <path d="M4 22 C 8 10, 24 10, 28 22 L 28 26 C 24 16, 8 16, 4 26 Z" fill="var(--accent)" />
              <rect x="14" y="24" width="4" height="4" fill="var(--accent)" opacity="0.6" />
            </svg>
          </div>
          <div style="display: flex; flex-direction: column;">
            <h1
              style="font-family: 'Outfit', sans-serif; font-size: 1.75rem; line-height: 1.1; margin: 0; letter-spacing: -0.02em;">
              Property Investing UK: <span style="color: var(--accent);">2026 Intelligence Hub</span>
            </h1>
            <p style="margin-top: 0.25rem; font-size: 0.85rem; color: var(--text-secondary); font-weight: 500;">
              Live directory of 50+ property investment channels & high-yield market trends
            </p>
          </div>
        </div>
      </div>
      <div class="controls">
        <a href="directory.html" class="btn btn-secondary"
          style="text-decoration: none; display: flex; align-items: center; gap: 0.5rem; background: rgba(255,255,255,0.05); color: var(--text-primary); border: 1px solid var(--border);">
          <span>Directory</span>
        </a>
        <a href="blog.html" class="btn btn-secondary"
          style="text-decoration: none; display: flex; align-items: center; gap: 0.5rem;">
          <span>Blog</span>
          <span
            style="font-size: 0.7rem; background: var(--accent); color: #000; padding: 1px 4px; border-radius: 3px; font-weight: 800;">NEW</span>
        </a>
        <input type="text" id="search-bar" placeholder="Search channels..." aria-label="Search channels" />
        <button class="btn" id="reload-btn">Reload feeds</button>
        <span class="counter" id="channel-count">0 channels</span>
      </div>
    </div>
  </header>

  <main>
    <section id="seo-intro" class="collapsed">
      <div class="seo-header" id="seo-toggle">
        <h2>Unlock 2026 Market Intelligence</h2>
        <span class="toggle-icon">▼</span>
      </div>
      <div class="seo-body">
        <p>As we transition into 2026, the UK property investment market is entering a phase of settled maturity.
          Following the volatility of the mid-2020s, the <strong>Bank of England base rate</strong> has stabilized
          within the anticipated <strong>3.25% to 3.5% range</strong>. This calibration has provided much-needed
          certainty for both institutional and private investors, allowing for more accurate yield forecasting and
          long-term leverage strategies. While mortgage products remain higher than the historic lows of the previous
          decade, the current equilibrium supports a balanced market where capital appreciation and rental demand remain
          in healthy alignment.</p>

        <p>The most significant regulatory shift in 2026 is the full implementation of the <strong>Renters' Rights
            Act</strong>, which became effective in <strong>May 2026</strong>. This landmark legislation has
          fundamentally altered the tenancy landscape by abolishing 'no-fault' evictions and moving all assured
          shorthold tenancies (ASTs) to a periodic model. Savvy investors are adapting by prioritizing high-quality
          property management and strictly adhering to the new <em>Decent Homes Standard</em>. This shift is cleansing
          the market of substandard operators, ultimately improving the sector's reputation and providing a more stable
          environment for committed professional landlords.</p>

        <p>Geographically, the <strong>Northern Powerhouse</strong> continues to outperform the South East in terms of
          relative growth and yield potential. Cities like <strong>Manchester, Birmingham, and Liverpool</strong> are
          benefiting from the acceleration of the £45 billion <em>Northern Powerhouse Rail (NPR)</em> program. The
          government's 2026 Northern Growth Strategy has catalyzed investment in core sectors like clean energy and life
          sciences across these regions. For investors, this translates into sustained demand for high-quality rental
          stock in regeneration hotspots, particularly where infrastructure improvements are reducing commute times and
          expanding local labor markets.</p>

        <p>Looking ahead to the remainder of 2026 and into 2027, the focus remains on <strong>sustainability and
            efficiency</strong>. Properties with high EPC ratings and those integrated into 'Smart City' initiatives are
          commanding a premium. For those looking to rank at the top of the investment hierarchy, the 2026 strategy must
          involve a blend of regulatory compliance, geographical foresight, and technical adaptability. This hub serves
          as your real-time directory to the voices defining these strategies across the UK's most influential property
          media channels.</p>
      </div>
    </section>

    <section class="special-section" id="featured-section">
      <h2 class="section-title">Featured Market Insight</h2>
      <div id="featured-container"></div>

      <div class="insight-grid">
        <div class="insight-card">
          <h3>High-Yield HMO Strategies</h3>
          <p>Exploring the 2026 shift towards luxury co-living and high-spec HMOs in response to the Renters' Rights
            Act. Focus on amenity-led spaces and sustainable management.</p>
        </div>
        <div class="insight-card">
          <h3>Northern Regeneration (Manchester/Leeds)</h3>
          <p>Deep dive into the 'Zone 2' hotspots surrounding major NPR hubs. Analyzing the 15-year growth trajectory
            for Manchester and the Leeds regeneration corridor.</p>
        </div>
        <div class="insight-card">
          <h3>Student Accommodation (PBSA) Forecasts</h3>
          <p>The 2026 outlook for Purpose-Built Student Accommodation. Why undersupply in Russell Group university
            cities is driving institutional appetite despite higher entry costs.</p>
        </div>
      </div>
    </section>

    <section class="special-section">
      <h2 class="section-title">Latest from All Channels</h2>
      <div class="latest-scroll" id="latest-videos-container">
        <p style="color: var(--text-secondary)">Loading latest updates...</p>
      </div>
    </section>

    <section class="special-section">
      <h2 class="section-title">Trending Shorts</h2>
      <div class="shorts-scroll" id="latest-shorts-container">
        <p style="color: var(--text-secondary)">Discover quick market insights...</p>
      </div>
    </section>

    <div class="channel-grid" id="main-grid"></div>
  </main>

  <footer>
    <div class="disclaimer">
      <strong>Financial Disclaimer:</strong> The content provided on this hub and within the linked videos is for
      informational and educational purposes only. It does not constitute financial, investment, or legal advice. UK
      property investment involves significant risk; past performance is not indicative of future results. Always
      consult with a qualified professional before making any financial decisions.
    </div>
    <div class="update-info">
      &copy; 2026 UK Property Intelligence Hub. Last Updated: February 22, 2026.
    </div>
  </footer>

  <div class="modal" id="video-modal" role="dialog" aria-modal="true">
    <button class="modal-close" id="close-modal" aria-label="Close modal">&times;</button>
    <div class="modal-content">
      <div class="video-container" id="player-wrapper"></div>
      <div class="modal-info">
        <div class="modal-title" id="modal-video-title">Video Title</div>
        <div class="modal-actions">
          <a href="#" id="modal-yt-link" class="yt-link" target="_blank" rel="noopener">Watch on YouTube</a>
        </div>
      </div>
    </div>
  </div>

  <script>
    // ==========================================
    // FEATURED VIDEO (EASY UPDATE)
    // Paste a YouTube video URL (or an 11-char video ID) below.
    // The page will auto-fetch Title, Channel, and Thumbnail using YouTube oEmbed (no API keys).
    // ==========================================
    const FEATURED_VIDEO_URL = "https://www.youtube.com/watch?v=D6_dPG9cmYw"; // Set to "random" or a specific URL
    // ==========================================

    const CHANNELS = [
      { name: "Samuel Leeds", channelId: "UCS6SES6btXx2tVFzWy4oToA", youtubeUrl: "https://www.youtube.com/channel/UCS6SES6btXx2tVFzWy4oToA" },
      { name: "Progressive Property", channelId: "UC0g1KuusONVStjY_XjdXy6g", youtubeUrl: "https://www.youtube.com/channel/UC0g1KuusONVStjY_XjdXy6g" },
      { name: "Jamie York", channelId: "UC-uWL-xlZiIKQD185xSGC5g", youtubeUrl: "https://www.youtube.com/channel/UC-uWL-xlZiIKQD185xSGC5g" },
      { name: "Property Hub", channelId: "UCybTSlsDvaxvPGLIoipK0WA", youtubeUrl: "https://www.youtube.com/channel/UCybTSlsDvaxvPGLIoipK0WA" },
      { name: "Ranjan Bhattacharya - Succeed In Property", channelId: "UCycEMZPP06TrEN_oilCrjyg", youtubeUrl: "https://www.youtube.com/channel/UCycEMZPP06TrEN_oilCrjyg" },
      { name: "Ahmed Khan", channelId: "UC-2aHNoWNs6vOknWNMAqwxw", youtubeUrl: "https://www.youtube.com/channel/UC-2aHNoWNs6vOknWNMAqwxw" },
      { name: "Property Accelerator - James Nicholson", channelId: "UCgH2SOwJH_SE5hsH-vKM10g", youtubeUrl: "https://www.youtube.com/channel/UCgH2SOwJH_SE5hsH-vKM10g" },
      { name: "Justin Wilkins", channelId: "UCl-FWC48WXjr9LODcoss_pA", youtubeUrl: "https://www.youtube.com/channel/UCl-FWC48WXjr9LODcoss_pA" },
      { name: "Move iQ", channelId: "UC9jtWjaSUE1A0_D-ge2fltA", youtubeUrl: "https://www.youtube.com/channel/UC9jtWjaSUE1A0_D-ge2fltA" },
      { name: "Jack Smith", channelId: "UC8cRzH0VaVT3dv5kwpeAgYw", youtubeUrl: "https://www.youtube.com/channel/UC8cRzH0VaVT3dv5kwpeAgYw" },
      { name: "Rahim Bah", channelId: "UCc7YeS0HxelASKt7QxkOvVQ", youtubeUrl: "https://www.youtube.com/channel/UCc7YeS0HxelASKt7QxkOvVQ" },
      { name: "Luigi Newton", channelId: "UCd8bz-shc7f5spmDJuyPWQw", youtubeUrl: "https://www.youtube.com/channel/UCd8bz-shc7f5spmDJuyPWQw" },
      { name: "Steven Hamilton", channelId: "UCf5HV2wblMNQ5nrSkVq_1Qw", youtubeUrl: "https://www.youtube.com/channel/UCf5HV2wblMNQ5nrSkVq_1Qw" },
      { name: "Simon Zutshi", channelId: "UCl-7AVs0lcSNdBjjEUizHfA", youtubeUrl: "https://www.youtube.com/channel/UCl-7AVs0lcSNdBjjEUizHfA" },
      { name: "Pure Living UK Property Investments", channelId: "UCsppLHKPxvcYiY0wut6Icgg", youtubeUrl: "https://www.youtube.com/channel/UCsppLHKPxvcYiY0wut6Icgg" },
      { name: "Guy Phoenix", channelId: "UCWSHPTAk6OQoIDKk_mblL-Q", youtubeUrl: "https://www.youtube.com/channel/UCWSHPTAk6OQoIDKk_mblL-Q" },
      { name: "Property Couple", channelId: "UC-r-iw_Aw7SFXbjt6IUD22A", youtubeUrl: "https://www.youtube.com/channel/UC-r-iw_Aw7SFXbjt6IUD22A" },
      { name: "Habitat Investments", channelId: "UCfI2jJdcDpO5mUZ8T01WpOw", youtubeUrl: "https://www.youtube.com/channel/UCfI2jJdcDpO5mUZ8T01WpOw" },
      { name: "Dave Cordner YouTube", channelId: "UCBRTOpYXoi3dhCXoNRU8JjQ", youtubeUrl: "https://www.youtube.com/channel/UCBRTOpYXoi3dhCXoNRU8JjQ" },
      { name: "Niche", channelId: "UCWu0TaWlZ4z6mFknWxpJshw", youtubeUrl: "https://www.youtube.com/channel/UCWu0TaWlZ4z6mFknWxpJshw" },
      { name: "Simon Smith Online", channelId: "UCe7GuJm6NdnaJ-mJPG3MykQ", youtubeUrl: "https://www.youtube.com/channel/UCe7GuJm6NdnaJ-mJPG3MykQ" },
      { name: "Harvey Growth Properties", channelId: "UCybzU6WPTCJkDFR75ae2f2A", youtubeUrl: "https://www.youtube.com/channel/UCybzU6WPTCJkDFR75ae2f2A" },
      { name: "Christopher Watkin", channelId: "UC5Ei7gMsp3DW7pNDD5zsOUw", youtubeUrl: "https://www.youtube.com/channel/UC5Ei7gMsp3DW7pNDD5zsOUw" },
      { name: "John Howard", channelId: "UCbk_CaPwqSDRdn_V7p2vHTA", youtubeUrl: "https://www.youtube.com/channel/UCbk_CaPwqSDRdn_V7p2vHTA" },
      { name: "Developing Homes", channelId: "UCmGvfVT18H2US69Wy5ZT6_g", youtubeUrl: "https://www.youtube.com/channel/UCmGvfVT18H2US69Wy5ZT6_g" },
      { name: "The Property Podcast", channelId: "UCMPPtrCuX93vVJkpT4fEO9w", youtubeUrl: "https://www.youtube.com/channel/UCMPPtrCuX93vVJkpT4fEO9w" },
      { name: "Scottish Property Podcast", channelId: "UCkk2-kHlQCx76wIpU9mxQsg", youtubeUrl: "https://www.youtube.com/channel/UCkk2-kHlQCx76wIpU9mxQsg" },
      { name: "Vijay Singh", channelId: "UCC-upRui6r9uv6TLZBwtcxA", youtubeUrl: "https://www.youtube.com/channel/UCC-upRui6r9uv6TLZBwtcxA" },
      { name: "Power Bespoke", channelId: "UC191Ht9md-WIfdJhZbWDWEg", youtubeUrl: "https://www.youtube.com/channel/UC191Ht9md-WIfdJhZbWDWEg" },
      { name: "Mitch Nunn Property", channelId: "UCtjF-rtiN3TD7LxWaJydxaA", youtubeUrl: "https://www.youtube.com/channel/UCtjF-rtiN3TD7LxWaJydxaA" },
      { name: "Property Investment Birmingham with Tu Nguyen", channelId: "UCTqzooQl_iR7qBbNrveEf4Q", youtubeUrl: "https://www.youtube.com/channel/UCTqzooQl_iR7qBbNrveEf4Q" },
      { name: "Property Developer Show", channelId: "UCEvQh5A_002nhHhZ3WT76-w", youtubeUrl: "https://www.youtube.com/channel/UCEvQh5A_002nhHhZ3WT76-w" },
      { name: "The Property XPerts Show with Ben & Jack", channelId: "UCSVTUzJALqErcVCRdfX0s_w", youtubeUrl: "https://www.youtube.com/channel/UCSVTUzJALqErcVCRdfX0s_w" },
      { name: "Jim Holland", channelId: "UCANXgibHpqVScUMuCIU8tcA", youtubeUrl: "https://www.youtube.com/channel/UCANXgibHpqVScUMuCIU8tcA" },
      { name: "MyHMO", channelId: "UCeEMassnbwVE9uYG0gQs-RQ", youtubeUrl: "https://www.youtube.com/channel/UCeEMassnbwVE9uYG0gQs-RQ" },
      { name: "Omer Mehmet", channelId: "UCZo7f7gcQrKIqmDfefuovZw", youtubeUrl: "https://www.youtube.com/channel/UCZo7f7gcQrKIqmDfefuovZw" },
      { name: "Dan Dan the Buy to Let Man", channelId: "UCLez4PcdHbUPQAKtcAJ1n8A", youtubeUrl: "https://www.youtube.com/channel/UCLez4PcdHbUPQAKtcAJ1n8A" },
      { name: "Auction House UK", channelId: "UCxf0mS9MQupIxSM2gw2ah6g", youtubeUrl: "https://www.youtube.com/channel/UCxf0mS9MQupIxSM2gw2ah6g" },
      { name: "Kevin McDonnell", channelId: "UCLyx6rEkhWG0d4QpkkqhSNw", youtubeUrl: "https://www.youtube.com/channel/UCLyx6rEkhWG0d4QpkkqhSNw" },
      { name: "Flambard Williams", channelId: "UCi1nz78sDIEHxjilv7etDrg", youtubeUrl: "https://www.youtube.com/channel/UCi1nz78sDIEHxjilv7etDrg" },
      { name: "UK Property Network Live", channelId: "UCqBQomdEBYaKM3YekIEOLow", youtubeUrl: "https://www.youtube.com/channel/UCqBQomdEBYaKM3YekIEOLow" },
      { name: "Landlord Studio", channelId: "UC1-JzEQUJXZd-UuBRveTaFQ", youtubeUrl: "https://www.youtube.com/channel/UC1-JzEQUJXZd-UuBRveTaFQ" },
      { name: "The Property Hustle", channelId: "UCR6ynXH6jiM3BIea8770z4w", youtubeUrl: "https://www.youtube.com/channel/UCR6ynXH6jiM3BIea8770z4w" },
      { name: "GetGround", channelId: "UCskTo4WcgcKPnynVp5NAnUw", youtubeUrl: "https://www.youtube.com/channel/UCskTo4WcgcKPnynVp5NAnUw" },
      { name: "GET INTO PROPERTY With Jason Kay", channelId: "UCzDtfgiWantrB1f2AEkbgiw", youtubeUrl: "https://www.youtube.com/channel/UCzDtfgiWantrB1f2AEkbgiw" },
      { name: "Together", channelId: "UC_RD6LkRZ7OaqOCGXxK0-OQ", youtubeUrl: "https://www.youtube.com/channel/UC_RD6LkRZ7OaqOCGXxK0-OQ" },
      { name: "Dan & Jim", channelId: "UCUyVZzqFJsYb94gqjnCQw0A", youtubeUrl: "https://www.youtube.com/channel/UCUyVZzqFJsYb94gqjnCQw0A" },
      { name: "CPC Finance", channelId: "UCIOEjyJ3UGpEXpap_gXxm0A", youtubeUrl: "https://www.youtube.com/channel/UCIOEjyJ3UGpEXpap_gXxm0A" },
      { name: "Aria Finance", channelId: "UCrreqGa7wvCGnYr2d9oigOA", youtubeUrl: "https://www.youtube.com/channel/UCrreqGa7wvCGnYr2d9oigOA" }
    ];

    const state = {
      channels: CHANNELS.map(c => ({ ...c, videos: [], shorts: [], status: "Loading...", isExpanded: false, isError: false })),
      searchTerm: "",
      latestVideos: [],
      latestShorts: []
    };

    const featuredState = {
      url: FEATURED_VIDEO_URL,
      id: "",
      title: "Featured Video",
      channel: "",
      description: "Tap to watch.",
      thumb: ""
    };

    const elements = {
      grid: document.getElementById("main-grid"),
      search: document.getElementById("search-bar"),
      reload: document.getElementById("reload-btn"),
      counter: document.getElementById("channel-count"),
      modal: document.getElementById("video-modal"),
      closeModal: document.getElementById("close-modal"),
      playerWrapper: document.getElementById("player-wrapper"),
      modalTitle: document.getElementById("modal-video-title"),
      modalYtLink: document.getElementById("modal-yt-link"),
      featured: document.getElementById("featured-container"),
      featuredSection: document.getElementById("featured-section"),
      latest: document.getElementById("latest-videos-container"),
      shorts: document.getElementById("latest-shorts-container")
    };

    function escapeHtml(text) {
      if (text == null) return "";
      return String(text)
        .replaceAll("&", "&amp;")
        .replaceAll("<", "&lt;")
        .replaceAll(">", "&gt;")
        .replaceAll('"', "&quot;")
        .replaceAll("'", "&#39;");
    }

    function debounce(fn, wait = 150) {
      let t;
      return (...args) => {
        clearTimeout(t);
        t = setTimeout(() => fn(...args), wait);
      };
    }

    function getYouTubeIdFromUrl(url) {
      if (!url) return "";
      const u = String(url).trim();

      if (/^[a-zA-Z0-9_-]{11}$/.test(u)) return u;

      try {
        const parsed = new URL(u);
        if (parsed.hostname.includes("youtu.be")) {
          return parsed.pathname.replace("/", "").slice(0, 11);
        }
        const v = parsed.searchParams.get("v");
        if (v) return v.slice(0, 11);

        const shorts = parsed.pathname.match(/\/shorts\/([a-zA-Z0-9_-]{11})/);
        if (shorts?.[1]) return shorts[1];

        const embed = parsed.pathname.match(/\/embed\/([a-zA-Z0-9_-]{11})/);
        if (embed?.[1]) return embed[1];
      } catch (_) { }

      return "";
    }

    async function fetchJsonWithFallback(url) {
      try {
        const res = await fetch(url, { cache: "no-store" });
        if (res.ok) return await res.json();
      } catch (_) { }

      const proxy = `https://api.allorigins.win/get?url=${encodeURIComponent(url)}`;
      const res2 = await fetch(proxy, { cache: "no-store" });
      if (!res2.ok) throw new Error("Proxy fetch failed");
      const data = await res2.json();
      if (!data.contents) throw new Error("Proxy returned no contents");
      return JSON.parse(data.contents);
    }

    async function setFeaturedFromUrl(url, videoObj = null) {
      if (url === "random") {
        featuredState.url = "random";
        elements.featuredSection.style.display = "none";
        return;
      }

      featuredState.url = url;
      featuredState.id = getYouTubeIdFromUrl(url);

      if (!featuredState.id) {
        elements.featuredSection.style.display = "none";
        return;
      }

      elements.featuredSection.style.display = "";
      // Use high-clarity WebP as the first attempt
      featuredState.thumb = `https://i.ytimg.com/vi_webp/${featuredState.id}/maxresdefault.webp`;

      if (videoObj) {
        if (videoObj.title) featuredState.title = videoObj.title;
        if (videoObj.channelName) featuredState.channel = videoObj.channelName;
        featuredState.description = featuredState.channel ? `From ${featuredState.channel}` : "Tap to watch.";
        renderFeatured();
        return;
      }

      featuredState.title = "Featured Video";
      featuredState.channel = "";
      featuredState.description = "Tap to watch.";

      try {
        const oembedUrl = `https://www.youtube.com/oembed?format=json&url=${encodeURIComponent("https://www.youtube.com/watch?v=" + featuredState.id)}`;
        const meta = await fetchJsonWithFallback(oembedUrl);
        if (meta?.title) featuredState.title = meta.title;
        if (meta?.author_name) featuredState.channel = meta.author_name;
        // Do not overwrite featuredState.thumb here; preservation of quality is managed in renderFeatured fallbacks

        const t = (featuredState.title || "").toLowerCase();
        const isUrlShort = url.includes("/shorts/");
        const isTitleShort = t.includes("#shorts") || t.includes("#short") || t.includes("reels") || t.includes("tiktok");

        if (isUrlShort || isTitleShort) {
          console.warn("Blocking YouTube Short from Featured section.");
          elements.featuredSection.style.display = "none";
          return;
        }

        featuredState.description = featuredState.channel ? `From ${featuredState.channel}` : "Tap to watch.";
      } catch (e) {
        console.warn("oEmbed fetch failed, using fallback data", e);
      }

      renderFeatured();
    }


    function pickRandomFeatured() {
      if (FEATURED_VIDEO_URL !== "random") return;
      if (state.latestVideos.length === 0) return;

      // Select from the latest 15 videos to ensure freshness
      const pool = state.latestVideos.slice(0, 15);
      const randomVideo = pool[Math.floor(Math.random() * pool.length)];

      if (randomVideo && randomVideo.id) {
        console.log("Randomly selected featured video:", randomVideo.title);
        // We set directly to bypass oEmbed if we already have the data, 
        // but setFeaturedFromUrl is robust, so we use it with the specific URL.
        setFeaturedFromUrl(`https://www.youtube.com/watch?v=${randomVideo.id}`, randomVideo);
      }
    }

    function parseVideoIdFromLink(link, guid) {
      if (!link) return "";
      if (link.includes("watch?v=")) return link.split("watch?v=")[1].split("&")[0];
      if (guid && guid.includes("video:")) return guid.split("video:")[1];
      return link.split("/").pop();
    }

    function markVideoUnavailable(id) {
      let changed = false;

      state.channels.forEach(c => {
        const before = c.videos.length;
        c.videos = c.videos.filter(v => v.id !== id);
        if (c.videos.length !== before) changed = true;
      });

      const beforeLatest = state.latestVideos.length;
      state.latestVideos = state.latestVideos.filter(v => v.id !== id);
      if (state.latestVideos.length !== beforeLatest) changed = true;

      if (changed) {
        render();
        renderLatest();
      }

      if (id === featuredState.id) {
        elements.featuredSection.style.display = "none";
      }
    }

    async function fetchWithTimeout(url, timeout = 12000) {
      const controller = new AbortController();
      const id = setTimeout(() => controller.abort(), timeout);
      try {
        const res = await fetch(url, { signal: controller.signal });
        clearTimeout(id);
        return res;
      } catch (err) {
        clearTimeout(id);
        throw err;
      }
    }

    function parseYouTubeFeedXml(xmlText) {
      if (!xmlText || xmlText.length < 50) throw new Error("xml empty");
      const parser = new DOMParser();
      const xml = parser.parseFromString(xmlText, "text/xml");
      const entries = xml.querySelectorAll("entry");
      if (!entries || entries.length === 0) throw new Error("no entries");

      return Array.from(entries).map(entry => {
        const videoId =
          entry.querySelector("videoId")?.textContent ||
          entry.getElementsByTagName("yt:videoId")?.[0]?.textContent ||
          (entry.querySelector("id")?.textContent || "").split(":").pop();

        const title = entry.querySelector("title")?.textContent || "";
        const published = entry.querySelector("published")?.textContent || "";
        return { id: (videoId || "").trim(), title, published };
      });
    }

    async function fetchFeed(channel) {
      const rssUrl = `https://www.youtube.com/feeds/videos.xml?channel_id=${channel.channelId}`;

      const proxies = [
        {
          name: "rss2json",
          url: `https://api.rss2json.com/v1/api.json?rss_url=${encodeURIComponent(rssUrl)}&count=25`,
          parser: async (res) => {
            const data = await res.json();
            if (data.status !== "ok" || !Array.isArray(data.items)) throw new Error("rss2json bad response");
            return data.items.map(item => ({
              id: parseVideoIdFromLink(item.link, item.guid),
              title: item.title || "",
              published: item.pubDate || ""
            }));
          }
        },
        {
          name: "allorigins_raw",
          url: `https://api.allorigins.win/raw?url=${encodeURIComponent(rssUrl)}`,
          parser: async (res) => parseYouTubeFeedXml(await res.text())
        },
        {
          name: "allorigins_get",
          url: `https://api.allorigins.win/get?url=${encodeURIComponent(rssUrl)}`,
          parser: async (res) => {
            const data = await res.json();
            if (!data.contents) throw new Error("allorigins get empty");
            return parseYouTubeFeedXml(data.contents);
          }
        },
        {
          name: "corsproxy",
          url: `https://corsproxy.io/?${encodeURIComponent(rssUrl)}`,
          parser: async (res) => parseYouTubeFeedXml(await res.text())
        },
        {
          name: "codetabs",
          url: `https://api.codetabs.com/v1/proxy?quest=${encodeURIComponent(rssUrl)}`,
          parser: async (res) => parseYouTubeFeedXml(await res.text())
        }
      ];

      channel.status = "Loading...";
      channel.isError = false;

      for (const proxy of proxies) {
        try {
          const response = await fetchWithTimeout(proxy.url);
          if (!response.ok) continue;

          let videos = await proxy.parser(response);

          // Separate Full Videos and Shorts
          const categorized = (videos || []).reduce((acc, v) => {
            if (!v || !v.id || v.id.length < 5) return acc;
            const t = (v.title || "").toLowerCase();
            // Robust check: title markers + vertical length indicators (YouTube usually tags them)
            const isShort = t.includes("#shorts") ||
              t.includes("#short") ||
              t.includes("tiktok") ||
              t.includes("reel") ||
              t.includes("reels") ||
              t.includes("youtube shorts");

            if (isShort) acc.shorts.push(v);
            else acc.videos.push(v);
            return acc;
          }, { videos: [], shorts: [] });

          categorized.videos.sort((a, b) => new Date(b.published) - new Date(a.published));
          categorized.shorts.sort((a, b) => new Date(b.published) - new Date(a.published));

          if (categorized.videos.length > 0 || categorized.shorts.length > 0) {
            channel.videos = categorized.videos.slice(0, 10);
            channel.shorts = categorized.shorts.slice(0, 5);
            channel.status = "Latest uploads";
            channel.isError = false;

            // Update Global Latest Scroll
            if (channel.videos[0]) {
              const vIdx = state.latestVideos.findIndex(v => v.channelId === channel.channelId);
              const vData = { ...channel.videos[0], channelName: channel.name, channelId: channel.channelId };
              if (vIdx >= 0) state.latestVideos[vIdx] = vData;
              else state.latestVideos.push(vData);
            }

            // Update Global Latest Shorts
            if (channel.shorts[0]) {
              const sIdx = state.latestShorts.findIndex(v => v.channelId === channel.channelId);
              const sData = { ...channel.shorts[0], channelName: channel.name, channelId: channel.channelId };
              if (sIdx >= 0) state.latestShorts[sIdx] = sData;
              else state.latestShorts.push(sData);
            }

            state.latestVideos.sort((a, b) => new Date(b.published) - new Date(a.published));
            state.latestShorts.sort((a, b) => new Date(b.published) - new Date(a.published));

            renderLatest();
            renderShorts();
            return;
          }
        } catch (err) {
          console.warn(`Proxy ${proxy.name} failed for ${channel.name}`, err);
        }
      }

      channel.status = "Feed unavailable";
      channel.isError = true;
      channel.videos = [];
      renderLatest();
    }

    async function loadAllFeeds() {
      const concurrency = 4;
      const queue = [...state.channels];

      // Step 1: Priority Batch (Top 8 channels)
      const priority = queue.splice(0, 8);
      await Promise.all(priority.map(c => fetchFeed(c).then(render)));

      // Step 2: Trigger Random Selection if necessary
      if (FEATURED_VIDEO_URL === "random" && !featuredState.id) {
        pickRandomFeatured();
      }

      // Step 3: Worker process for the rest
      async function worker() {
        while (queue.length > 0) {
          const channel = queue.shift();
          if (!channel) break;
          await fetchFeed(channel);
          render();
          await new Promise(r => setTimeout(r, 300));
        }
      }

      await Promise.all(Array(concurrency).fill(null).map(worker));
    }

    function renderFeatured() {
      try {
        if (!featuredState.id) {
          elements.featured.innerHTML = "";
          return;
        }

        const safeTitle = escapeHtml(featuredState.title || "Featured Video");
        const safeDesc = escapeHtml(featuredState.description || "");
        const watchUrl = `https://www.youtube.com/watch?v=${featuredState.id}`;

        elements.featured.innerHTML = `
        <div class="featured-card">
          <div class="featured-thumb"
               data-action="open-video"
               data-video-id="${featuredState.id}"
               data-video-title="${safeTitle}">
            <img src="${featuredState.thumb}"
                 alt="${safeTitle}"
                 fetchpriority="high"
                 loading="eager"
                 decoding="sync"
                 style="display: block; image-rendering: -webkit-optimize-contrast;"
                 onerror="if(this.src.includes('vi_webp')){ this.src='https://i.ytimg.com/vi/${featuredState.id}/maxresdefault.jpg'; } else if(this.src.includes('maxresdefault')){ this.src='https://i.ytimg.com/vi/${featuredState.id}/sddefault.jpg'; } else if(this.src.includes('sddefault')){ this.src='https://i.ytimg.com/vi/${featuredState.id}/hqdefault.jpg'; }">
          </div>
          <div class="featured-content">
            <div class="latest-channel">Featured</div>
            <h3 style="font-size: 1.5rem; line-height: 1.2;">${safeTitle}</h3>
            <p style="color: var(--text-secondary); font-size: 0.9rem;">${safeDesc}</p>

            <div style="margin-top: 1rem; display: flex; gap: 1rem; align-items: center; flex-wrap: wrap;">
              <button class="btn"
                      data-action="open-video"
                      data-video-id="${featuredState.id}"
                      data-video-title="${safeTitle}">Watch Now</button>
              <a href="${watchUrl}" target="_blank" rel="noopener"
                 style="color: var(--accent); font-size: 0.9rem; text-decoration: none;">Watch on YouTube</a>
            </div>

            <p style="margin-top: 0.75rem; color: var(--text-secondary); font-size: 0.8rem;">
              If playback fails in the embedded player, use “Watch on YouTube”.
            </p>
          </div>
        </div>
      `;
      } catch (e) {
        console.error("Featured render failed", e);
      }
    }

    function renderLatest() {
      if (!state.latestVideos || state.latestVideos.length === 0) {
        elements.latest.innerHTML = `<p style="color: var(--text-secondary)">No latest videos yet. Try Reload feeds.</p>`;
        return;
      }

      elements.latest.innerHTML = state.latestVideos.map(v => {
        const safeTitle = escapeHtml(v.title || "Untitled");
        const safeChannel = escapeHtml(v.channelName || "");
        return `
        <div class="latest-item"
             data-action="open-video"
             data-video-id="${v.id}"
             data-video-title="${safeTitle}">
          <div class="latest-channel">${safeChannel}</div>
          <div class="thumb-wrapper" style="margin-bottom: 0.5rem;">
            <img src="https://i.ytimg.com/vi/${v.id}/mqdefault.jpg"
                 loading="lazy"
                 alt="${safeTitle}"
                 onerror="this.onerror=null; this.src='https://i.ytimg.com/vi/${v.id}/0.jpg'; this.onerror=function(){ markVideoUnavailable('${v.id}'); }">
          </div>
          <div class="video-title" style="font-size: 0.75rem;">${safeTitle}</div>
        </div>
      `;
      }).join("");
    }

    function renderShorts() {
      if (!state.latestShorts || state.latestShorts.length === 0) {
        elements.shorts.innerHTML = `<p style="color: var(--text-secondary)">No shorts available yet.</p>`;
        return;
      }

      elements.shorts.innerHTML = state.latestShorts.map(s => {
        const safeTitle = escapeHtml(s.title || "Untitled");
        return `
        <div class="shorts-item"
             data-action="open-video"
             data-video-id="${s.id}"
             data-video-title="${safeTitle}">
          <div class="shorts-thumb-wrapper">
            <div class="shorts-badge">Shorts</div>
            <img src="https://i.ytimg.com/vi/${s.id}/hqdefault.jpg"
                 loading="lazy"
                 alt="${safeTitle}"
                 onerror="this.onerror=null; this.src='https://i.ytimg.com/vi/${s.id}/0.jpg';">
            <div class="shorts-title">${safeTitle}</div>
          </div>
        </div>
      `;
      }).join("");
    }

    function render() {
      const filtered = state.channels.filter(c => c.name.toLowerCase().includes(state.searchTerm));

      elements.grid.innerHTML = filtered.map(channel => {
        const displayVideos = channel.isExpanded ? channel.videos : channel.videos.slice(0, 2);
        const hasMore = channel.videos.length > 2;

        const statusClass = channel.isError ? "error" : (channel.status === "Latest uploads" ? "success" : "");
        const statusText = channel.status === "Loading..."
          ? `<span><span class="loader"></span>Loading...</span>`
          : `<span>${escapeHtml(channel.status || "")}</span>`;

        const retry = channel.isError
          ? `<button class="retry-btn" data-action="retry-channel" data-channel-id="${channel.channelId}">Retry</button>`
          : "";

        const videosHtml = channel.videos.length > 0
          ? displayVideos.map(v => {
            const safeTitle = escapeHtml(v.title || "Untitled");
            return `
              <div class="video-item"
                   data-action="open-video"
                   data-video-id="${v.id}"
                   data-video-title="${safeTitle}">
                <div class="thumb-wrapper">
                  <img src="https://i.ytimg.com/vi/${v.id}/mqdefault.jpg"
                       loading="lazy"
                       alt="${safeTitle}"
                       onerror="this.onerror=null; this.src='https://i.ytimg.com/vi/${v.id}/hqdefault.jpg'; this.onerror=function(){ markVideoUnavailable('${v.id}'); }">
                </div>
                <div class="video-title">${safeTitle}</div>
              </div>
            `;
          }).join("")
          : Array(2).fill(`
            <div class="video-item" style="cursor: default;">
              <div class="thumb-wrapper" style="background:#111"></div>
              <div style="height: 1rem; background: #111; width: 80%; border-radius: 2px; margin-top: 4px;"></div>
            </div>
          `).join("");

        const toggleBtn = hasMore ? `
        <div style="padding: 0 1rem 1rem; text-align: center;">
          <button class="btn"
                  style="width: 100%; background: var(--border); border: 1px solid var(--border); color: var(--text-primary); font-weight: 600;"
                  data-action="toggle-expand"
                  data-channel-id="${channel.channelId}">
            ${channel.isExpanded ? "Show Less" : `Show All Videos (${channel.videos.length})`}
          </button>
        </div>
      ` : "";

        return `
        <article class="channel-card">
          <div class="channel-header">
            <a href="${channel.youtubeUrl}" target="_blank" rel="noopener" class="channel-name">${escapeHtml(channel.name)}</a>
            <div class="channel-links">
              <a href="${channel.youtubeUrl}" target="_blank" rel="noopener" class="open-link">Open channel</a>
              <span class="status ${statusClass}">
                ${statusText}
                ${retry}
              </span>
            </div>
          </div>
          <div class="video-grid">${videosHtml}</div>
          ${toggleBtn}
        </article>
      `;
      }).join("");
    }

    function toggleExpand(channelId) {
      const channel = state.channels.find(c => c.channelId === channelId);
      if (!channel) return;
      channel.isExpanded = !channel.isExpanded;
      render();
    }

    function retryChannel(channelId) {
      const channel = state.channels.find(c => c.channelId === channelId);
      if (!channel) return;
      channel.status = "Loading...";
      channel.isError = false;
      channel.videos = [];
      render();
      fetchFeed(channel).then(render);
    }

    function openModal(id, title) {
      if (!id) return;

      elements.modalTitle.textContent = title || "Video";
      elements.modalYtLink.href = `https://www.youtube.com/watch?v=${encodeURIComponent(id)}`;

      const origin = encodeURIComponent(window.location.origin);
      const embedUrl =
        `https://www.youtube-nocookie.com/embed/${encodeURIComponent(id)}` +
        `?autoplay=1&rel=0&playsinline=1&modestbranding=1&origin=${origin}`;

      elements.playerWrapper.innerHTML = `
      <iframe
        src="${embedUrl}"
        referrerpolicy="strict-origin-when-cross-origin"
        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
        allowfullscreen>
      </iframe>
    `;

      elements.modal.style.display = "flex";
      document.body.style.overflow = "hidden";
    }

    function closeModal() {
      elements.modal.style.display = "none";
      elements.playerWrapper.innerHTML = "";
      document.body.style.overflow = "auto";
    }

    function init() {
      // Prioritize Featured Content & Initial Load for Speed
      setFeaturedFromUrl(FEATURED_VIDEO_URL);

      elements.counter.textContent = `${CHANNELS.length} channels`;
      render();
      loadAllFeeds();

      // SEO Toggle logic
      const seoToggle = document.getElementById("seo-toggle");
      const seoSection = document.getElementById("seo-intro");
      if (seoToggle && seoSection) {
        seoToggle.addEventListener("click", () => {
          seoSection.classList.toggle("collapsed");
        });
      }

      elements.search.addEventListener("input", debounce((e) => {
        state.searchTerm = (e.target.value || "").toLowerCase();
        render();
      }, 100));

      elements.reload.addEventListener("click", () => {
        state.latestVideos = [];
        state.latestShorts = [];

        // Reset featured video if random is enabled
        if (FEATURED_VIDEO_URL === "random") {
          featuredState.id = "";
          featuredState.title = "";
          featuredState.thumb = "";
          elements.featured.innerHTML = "";
          elements.featuredSection.style.display = "none";
        }

        state.channels.forEach(c => {
          c.status = "Loading...";
          c.isError = false;
          c.videos = [];
          c.shorts = [];
          c.isExpanded = false;
        });
        render();
        renderLatest();
        renderShorts();
        loadAllFeeds();
      });

      elements.closeModal.addEventListener("click", closeModal);
      elements.modal.addEventListener("click", (e) => {
        if (e.target === elements.modal) closeModal();
      });

      window.addEventListener("keydown", (e) => {
        if (e.key === "Escape") closeModal();
      });

      // Event delegation (no inline onclick, avoids quote-breaking bugs)
      document.body.addEventListener("click", (e) => {
        const videoEl = e.target.closest("[data-action='open-video']");
        if (videoEl) {
          const id = videoEl.getAttribute("data-video-id");
          const title = videoEl.getAttribute("data-video-title") || "Video";
          openModal(id, title);
          return;
        }

        const toggleEl = e.target.closest("[data-action='toggle-expand']");
        if (toggleEl) {
          toggleExpand(toggleEl.getAttribute("data-channel-id"));
          return;
        }

        const retryEl = e.target.closest("[data-action='retry-channel']");
        if (retryEl) {
          retryChannel(retryEl.getAttribute("data-channel-id"));
          return;
        }
      });
      window.addEventListener("scroll", () => {
        const btt = document.getElementById("back-to-top");
        if (window.scrollY > 400) {
          btt.classList.add("visible");
        } else {
          btt.classList.remove("visible");
        }
      });

      document.getElementById("back-to-top").addEventListener("click", () => {
        window.scrollTo({ top: 0, behavior: "smooth" });
      });
    }

    window.markVideoUnavailable = markVideoUnavailable;
    window.addEventListener("load", init);
  </script>

  <div id="back-to-top" class="back-to-top" title="Back to Top">
    <svg viewBox="0 0 24 24">
      <path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" />
    </svg>
  </div>

  <!-- PROPERTY AI ASSISTANT WIDGET -->
  <iframe src="ai-agent.html"
    style="position: fixed; bottom: 0; right: 0; width: 400px; height: 650px; border: none; z-index: 10000; pointer-events: none;"
    id="ai-agent-iframe"></iframe>

  <script>
    // This allows clicking through the iframe to the button underneath when collapsed
    window.addEventListener('message', function (e) {
      const iframe = document.getElementById('ai-agent-iframe');
      if (e.data === 'expand') {
        iframe.style.pointerEvents = 'auto';
      } else if (e.data === 'collapse') {
        iframe.style.pointerEvents = 'none';
      }
    });
  </script>

</body>

</html>